{% extends "base.html" %}
{% set title = "Workouts â€¢ Wonderland Trainer" %}

{% block content %}
<div class="rounded-3xl border border-slate-800 bg-slate-900/30 p-6">
  <div class="flex items-start justify-between gap-4">
    <div>
      <div class="text-2xl font-semibold">Workouts</div>
      <div class="mt-1 text-sm text-slate-400">Most recent 200 sessions</div>
    </div>
    <a href="{{ url_for('log_workout_form') }}"
       class="rounded-2xl bg-gradient-to-r from-indigo-500 to-cyan-400 px-4 py-2 text-sm font-semibold text-slate-950">
      Log workout
    </a>
  </div>

  <div class="mt-6 overflow-x-auto">
    <table class="w-full text-sm">
      <thead class="text-slate-400">
        <tr class="border-b border-slate-800">
          <th class="py-3 text-left font-medium">Date</th>
          <th class="py-3 text-left font-medium">Type</th>
          <th class="py-3 text-right font-medium">Min</th>
          <th class="py-3 text-right font-medium">Mi</th>
          <th class="py-3 text-right font-medium">%</th>
          <th class="py-3 text-right font-medium">Vert</th>
          <th class="py-3 text-right font-medium">Pack</th>
          <th class="py-3 text-right font-medium">RPE</th>
          <th class="py-3 text-right font-medium">Stress</th>
          <th class="py-3 text-right font-medium"></th>
        </tr>
      </thead>
      <tbody class="divide-y divide-slate-800">
        {% for w in workouts %}
        <tr class="hover:bg-slate-950/30">
          <td class="py-3">{{ w.session_date.strftime("%b %d, %Y") }}</td>
          <td class="py-3">
            <span class="rounded-xl border border-slate-800 bg-slate-950/40 px-2 py-1 text-xs">{{ w.type }}</span>
          </td>
          <td class="py-3 text-right">{{ w.duration_min }}</td>
          <td class="py-3 text-right">{{ "%.2f"|format(w.distance_mi) }}</td>
          <td class="py-3 text-right">{{ "%.1f"|format(w.incline_pct) }}</td>
          <td class="py-3 text-right">{{ w.vertical_ft()|round0 }}</td>
          <td class="py-3 text-right">{{ "%.1f"|format(w.pack_lb) }}</td>
          <td class="py-3 text-right">{{ w.rpe }}</td>
          <td class="py-3 text-right">{{ "%.1f"|format(w.session_stress()) }}</td>
          <td class="py-3 text-right">
            <form method="post" action="{{ url_for('delete_workout', workout_id=w.id) }}" onsubmit="return confirm('Delete this workout?');">
              <button class="text-xs text-slate-400 hover:text-rose-300">Delete</button>
            </form>
          </td>
        </tr>
        {% if w.notes %}
        <tr class="bg-slate-950/20">
          <td colspan="10" class="pb-3 text-xs text-slate-400">
            <div class="pl-2">Notes: {{ w.notes }}</div>
          </td>
        </tr>
        {% endif %}
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
